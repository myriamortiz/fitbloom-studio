<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>FitBloom Studio</title>
  <script>
    // Redirection Onboarding (si pas de profil)
    if (!localStorage.getItem('userProfile')) {
      window.location.href = 'intro.html';
    }
  </script>

  <!-- Confetti Library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- IcÃ´nes PWA -->
  <link rel="icon" type="image/png" sizes="192x192" href="assets/logo/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="assets/logo/icon-512.png" />

  <!-- Couleur navigateur -->
  <meta name="theme-color" content="#000000" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css?v=2.0" />
</head>

<body>

  <!-- HEADER -->
  <header class="fbs-header">
    <div class="fbs-logo-container">
      <img src="assets/logo/logo-fbs-light.png" alt="FitBloom Logo" class="fbs-logo" />
    </div>

    <div class="fbs-title">
      <h1>FitBloom Studio</h1>
      <p>Food â€¢ Fitness â€¢ Flow</p>
    </div>
  </header>

  <!-- MESSAGE BIENVENUE -->
  <section class="fbs-welcome">
    <span>Je mâ€™accorde le droit dâ€™Ãªtre heureuse et en paix avec moi-mÃªme.</span>
  </section>

  <!-- BOUTONS -->
  <main class="fbs-main">

    <!-- GAMIFICATION WIDGET -->
    <div id="bloom-widget-area" style="width:100%; max-width:400px; margin-bottom:1rem;"></div>

    <a href="food.html" class="fbs-btn">
      <span class="icon">ğŸ½ï¸</span>
      <span class="label">Food Universe</span>
      <span class="sub">Menus & Recettes</span>
    </a>

    <a href="fitness.html" class="fbs-btn">
      <span class="icon">ğŸ’ª</span>
      <span class="label">Fitness Universe</span>
      <span class="sub">Workouts & Routine</span>
    </a>

    <a href="selfcare.html" class="fbs-btn">
      <span class="icon">ğŸŒ¿</span>
      <span class="label">Selfcare Universe</span>
      <span class="sub">Mood & Rituels</span>
    </a>

    <a href="tracker.html" class="fbs-btn">
      <span class="icon">â±ï¸</span>
      <span class="label">Tracker Universe</span>
      <span class="sub">Eau â€¢ Pas â€¢ JeÃ»ne</span>
    </a>
  </main>

  <script src="gamification.js?v=2.0"></script>

  <!-- FOOTER -->
  <footer class="fbs-footer" style="flex-direction: column; align-items: center; gap: 1rem;">
    <a href="measurements.html" style="text-decoration:none;">
      <button class="footer-link footer-btn-trackers">
        ğŸ“ Mensurations
      </button>
    </a>

    <!-- PWA Install Button (Hidden by default) -->
    <button id="install-btn" class="footer-btn-install">
      ğŸ“² Installer l'application
    </button>

    <div>
      <button onclick="resetApp()" class="footer-btn-reset">
        ğŸ”„ Reset App
      </button>
    </div>
    <script>
      function resetApp() {
        if (confirm("Tout effacer et recommencer Ã  zÃ©ro ?")) {
          localStorage.clear();
          // Force reload ignoring cache
          window.location.reload(true);
        }
      }
    </script>
  </footer>

  <!-- JS principal -->
  <script src="app.js?v=2.0"></script>

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("service-worker.js")
        .then(reg => {
          // Force update
          reg.update();
          console.log("Service worker enregistrÃ©");
        })
        .catch(err => console.log("Erreur SW :", err));
    }
  </script>

</body>

</html>